docker란?
도커는 애플리케이션을 신속하게 구축, 테스트 및 배포 할 수 있는 소프트웨어 플랫폼

- 소프트웨어를 컨테이너라는 표준화된 유닛으로 패키징
- 컨테이너에는 라이브러리, 시스템 도구, 코드, 런타임 등 소프트웨어를 실행하는 데 필요한 모든 것이 포함
- 환경에 구애 받지 않고 애플리케이션을 신속하게 배포 및 확장할 수 있으면 코드가 문제없이 실행
  초기에는 lxc을 이용 0.9 버전부터 libcontainer 개발후 사용 현재는 containerd 기반으로 컨테이너를 관리하고 있습니다.

docker archictecture
docker client
도커 사용자가 도커와 상호작용하는 기본방법
docker run 와 같은 명령을 사용하면 클라이언트는 이러한 명령을 전송하여 dockerd 수행
docker 명령은 docker api를 사용
docker 클라이언트는 둘 이상의 데몬과 통신

docker host
docker daemon
docker api요청을 수신하고 이미지, 컨테이너, 네트워크 및 볼륨과 같은 Docker 객체를 관리
containers
컨테이너는 이미지의 실행 가능한 인스턴스
docker api 또는 cli를 사용하여 컨테이너를 생서, 시작,중지, 이동 또는 삭제
컨테이너를 하나 이상의 네트워크에 연결하거나 스토리지를 연결하거나 현재 상태를 기반으로 새 이미지를 생성
image
docker 컨테이너 생성 지침이 포함된 읽기 전용 템플릿
일부 추가 사용자 지정과 함께 다른 이미지를 기반으로 함
고유한 이미지를 빌드하려면 이미지를 만들고 실행하는 데 필요한 단계를 정의하는 간단한 구문으로 dockerfile 을 만듬

docker registry
도커 이미지를 저장
도커 허브 는 누구나 사용 할 수 있는 공개 레지스트리
도커는 기본적으로 docker hub에서 이미지를 찾도록 구성
개인 레지스트리를 실행할 수 있음

도커를 사용하는 이유
더많은 소프트웨어를 더 빨리 제공
어디서나 단일 객체
필요할때마다 격리된 애플리케이션 사용 가능
작은 컨테이너 어플리케이션
aws 이전할때도 원활하게 이전 가능
비용절감

---

도커 간단 명령어 살펴보기

```dockerfile
#syntax=docker/dockerfile:1
from node:18-alpine
workdir /app
copy ..
run yarn install --production
cmd ["node", "src/index.js"]
expose 3000
```

컨테이너 볼륨
볼륨마운트 , 바인드마운트

다중 컨테이너 앱
각 컨테이너는 한 가지 일을 잘 수행해야 함
데이터베이스와 다르게 api 및 프런트 엔드를 확장해야 할 가능성이 높음
별도의 컨테이너를 사용하면 독립적으로 버전을 관리하고 업데이트
로컬에서 데이터베이스용 컨테이너를 사용할 수 있지만 프로덕션에서는 데이터베이스용 관리 서비스를 사용
여러 프로세스를 실행하려면 프로세스 관리자가 필요하므로(컨테이너는 하나의 프로세스만 시작함) 컨테이너 시작/종료에 복잡성이 추가됨

한 컨테이너가 다른 컨테이너와 통신하도록 하려면? 네트워킹
컨테이너를 네트워크에 배치하는법
시작할때 할당하거나
연결하기

동일한 네트워크에서 컨테이너를 시작했을때 컨테이너를 어떻게 찾을수있을지
고유의 ip를 할당받음
nicolaka/netshoot 이미지를 사용하여 dig e도구를 사용하여 mysql hostname에 대한 Ip 검색

도커 명령어 살펴보기
docker start
docker stop
docker run
docker exec
docker logs

---

docker package 구동 테스트
도커 컴포즈는 다중 컨테이너 애플리케이션을 정의하고 공유하는데 도움이 되도록 개발된 도구
docker compose install
window 또는 mac docker desktop/toolbox 를 설치했다면 이미 docker compose가 설치되어 있음
linux 시스템을 사용 중인 경우 docker compose 를 설치 해야 함
설치 후 다음을 실행하고 버전 정보 확인
앱서비스 정의
앱프로젝트의 루트에서 docker-compose.yaml 생성하고 컨테이너의 서비스 항목과 이미지를 정의

---

fastApi
프레임워크, 고성능, 간편한 학습, 빠른 코드 작성, 준비된 프로덕션
빠름: starlette과 pydantic 덕분에 nodejs 및 go 와 대등할 정도로 매우 높은 성능
빠른 코드 작성: 약 200%에서 300% 까지 기능 개발 속도 증가
적은 버그: 사람에의한 에러 약 40%감소
직관적: 훌륭한 편집기 지원 모든곳에서 자도완성 적은 디버깅 시간
쉬움: 쉽게 사용하고 배우도록 설계 적은 문서 일기 시간
짦음: 코드 중복 최소화 각 매개 변수 선언의 여러긴으 적은버그
견고함: 준비된 프로덕션 용 코드를 얻으십시오 자동 대화형 문서와 함께
표준기반: api에대한 완전히 호환되는 개방형 표준 기반: openapi 이전에 swagger로 얄려졌던 및 json 스키마
